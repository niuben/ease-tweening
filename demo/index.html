<html>
    <head>
        <title>ease-tweening</title>
    </head>
    <body>
        <div id="echart" style="height: 1000px;width:1000px;"></div>
        <script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.7.0/echarts-en.common.js"></script>
        <script src="./index.js"></script>
        <script>
            var funs = [
                    "linear",
                    "easeInQuad",
                    "easeInCubic",
                    "easeInQuart",
                    "easeInQuint",
                    "easeInSine",
                    "easeInExpo",
                    "easeInCirc",
                    "easeInBounce",
                    "easeInElastic",
                    "easeInBack",
                    "easeOutQuad",
                    "easeOutCubic",
                    "easeOutQuart",
                    "easeOutQuint",
                    "easeOutSine",
                    "easeOutExpo",
                    "easeOutCirc",
                    "easeOutBounce",
                    "easeOutElastic",
                    "easeOutBack",
                    "easeInOutQuad",
                    "easeInOutCubic",
                    "easeInOutQuart",
                    "easeInOutQuint",
                    "easeInOutSine",
                    "easeInOutExpo",
                    "easeInOutCirc",
                    "easeInOutBounce",
                    "easeInOutElastic",
                    "easeInOutBack"];

            var N_POINT = 30;
            var grids = [];
            var xAxes = [];
            var yAxes = [];
            var series = [];
            var titles = [];
            var count = 0;


            function loopFuns(){
                fun = funs[count];                
                var s0 = [];
                easeTweening[fun]({
                    from: 0,
                    to: 1,
                    duration: 4000,
                    onUpdate: function(data, percent){
                        s0.push([percent,data]);
                    },
                    onEnd: function(data, percent){                
                        s0.push([percent, data]);
                        console.dir(s0);
                        var data = [];
                        // for (var i = 0; i <= N_POINT; i++) {
                        //     var x = i / N_POINT;
                        //     var y = easingFunc(x);
                        //     data.push([x, y]);
                        // }
                        grids.push({
                            show: true,
                            borderWidth: 0,
                            backgroundColor: '#fff',
                            shadowColor: 'rgba(0, 0, 0, 0.3)',
                            shadowBlur: 2
                        });
                        xAxes.push({
                            type: 'value',
                            show: false,
                            min: 0,
                            max: 1,
                            gridIndex: count
                        });
                        yAxes.push({
                            type: 'value',
                            show: false,
                            min: -0.4,
                            max: 1.4,
                            gridIndex: count
                        });
                        series.push({
                            name: fun,
                            type: 'line',
                            xAxisIndex: count,
                            yAxisIndex: count,
                            data: s0,
                            showSymbol: false,
                            animationEasing: fun,
                            animationDuration: 1000
                        });
                        titles.push({
                            textAlign: 'center',
                            text: fun,
                            textStyle: {
                                fontSize: 12,
                                fontWeight: 'normal'
                            }
                        });
                        
                        count++;

                        if(count < funs.length){
                            loopFuns(count);
                        }else{
                            drawChart(); 
                        }

                    }
                })                                                                                    
            }


            function drawChart(){

                var rowNumber = Math.ceil(Math.sqrt(count));
                echarts.util.each(grids, function (grid, idx) {
                    grid.left = ((idx % rowNumber) / rowNumber * 100 + 0.5) + '%';
                    grid.top = (Math.floor(idx / rowNumber) / rowNumber * 100 + 0.5) + '%';
                    grid.width = (1 / rowNumber * 100 - 1) + '%';
                    grid.height = (1 / rowNumber * 100 - 1) + '%';
                    
                    titles[idx].left = parseFloat(grid.left) + parseFloat(grid.width) / 2 + '%';
                    titles[idx].top = parseFloat(grid.top) + '%';
                });
                
                option = {
                    title: titles.concat([{
                        text: 'Different Easing Functions',
                        top: 'bottom',
                        left: 'center'
                    }]),
                    grid: grids,
                    xAxis: xAxes,
                    yAxis: yAxes,
                    series: series
                };
                
                var myEchart = echarts.init(document.getElementById("echart"));
                myEchart.setOption(option);
            }                


            loopFuns(0);
        </script>
    </body>
</html>